<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Candidate Dashboard - Merituno</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="stylesheet" href="/users/css/users.css" />
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-storage.js"></script>
    <script src="../login/js/auth.js"></script>

    <!-- Add CSS for application status -->
    <style>
      .applications-section {
        margin-top: 40px;
        border-top: 1px solid #e0e0e0;
        padding-top: 30px;
      }

      .applications-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
        gap: 20px;
        margin-top: 20px;
      }

      .application-item {
        border-left: 4px solid #007bff;
      }

      .application-status {
        padding: 4px 12px;
        border-radius: 20px;
        font-size: 12px;
        font-weight: 600;
        text-transform: capitalize;
      }

      .status-pending {
        background-color: #fff3cd;
        color: #856404;
        border: 1px solid #ffeaa7;
      }

      .status-accepted {
        background-color: #d1ecf1;
        color: #0c5460;
        border: 1px solid #bee5eb;
      }

      .status-rejected {
        background-color: #f8d7da;
        color: #721c24;
        border: 1px solid #f5c6cb;
      }

      .accepted-message,
      .rejected-message {
        padding: 12px;
        border-radius: 8px;
        margin-top: 12px;
        display: flex;
        align-items: flex-start;
        gap: 10px;
      }

      .accepted-message {
        background-color: #d4edda;
        border: 1px solid #c3e6cb;
        color: #155724;
      }

      .rejected-message {
        background-color: #f8d7da;
        border: 1px solid #f5c6cb;
        color: #721c24;
      }

      .accepted-message i,
      .rejected-message i {
        font-size: 18px;
        margin-top: 2px;
      }

      .notification {
        position: fixed;
        top: 20px;
        right: 20px;
        background: white;
        border-radius: 8px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        z-index: 1000;
        max-width: 400px;
        animation: slideIn 0.3s ease-out;
      }

      .notification-content {
        padding: 16px;
        display: flex;
        align-items: flex-start;
        gap: 12px;
      }

      .notification i {
        font-size: 20px;
        margin-top: 2px;
      }

      .acceptance-notification i {
        color: #28a745;
      }

      .rejection-notification i {
        color: #dc3545;
      }

      .notification-text h4 {
        margin: 0 0 8px 0;
        font-size: 16px;
      }

      .notification-text p {
        margin: 0;
        font-size: 14px;
        color: #666;
      }

      .close-notification {
        background: none;
        border: none;
        font-size: 18px;
        cursor: pointer;
        color: #999;
        margin-left: auto;
      }

      @keyframes slideIn {
        from {
          transform: translateX(100%);
          opacity: 0;
        }
        to {
          transform: translateX(0);
          opacity: 1;
        }
      }
    </style>
  </head>
  <body>
    <div class="dashboard-container">
      <!-- Sidebar Navigation -->
      <aside class="dashboard-sidebar">
        <div class="sidebar-header">
          <img src="../images/logo.png" alt="Merituno Logo" />
          <h2>Merituno</h2>
        </div>
        <ul class="sidebar-menu">
          <li>
            <a href="#" class="active" data-section="profile">
              <i class="fas fa-user"></i> <span>Profile</span>
            </a>
          </li>
          <li>
            <a href="#" data-section="learning">
              <i class="fas fa-graduation-cap"></i> <span>Learning</span>
            </a>
          </li>
          <li>
            <a href="#" data-section="jobs">
              <i class="fas fa-briefcase"></i> <span>Jobs</span>
            </a>
          </li>
          <li>
            <a href="#" data-section="freelance">
              <i class="fas fa-laptop-code"></i> <span>Freelance</span>
            </a>
          </li>
          <li>
            <a href="#" data-section="wallet">
              <i class="fas fa-wallet"></i> <span>Wallet</span>
            </a>
          </li>
          <li>
            <a href="#" data-section="chats">
              <i class="fas fa-comments"></i> <span>Messages</span>
            </a>
          </li>
        </ul>
      </aside>

      <!-- Main Content Area -->
      <main class="dashboard-main">
        <!-- Top Header with User Profile -->
        <div class="dashboard-header">
          <div class="level-container">
            <div class="level-info">
              <div class="level-title">Star Level</div>
              <div class="level-number" id="star-level">1</div>
            </div>
            <div class="xp-container">
              <div class="xp-progress">
                <div
                  class="xp-progress-bar"
                  id="xp-progress-bar"
                  style="width: 0%"
                ></div>
              </div>
              <div class="xp-text" id="xp-text">0/100 XP</div>
            </div>
          </div>

          <div class="user-profile" id="user-profile-toggle">
            <div class="user-avatar" id="user-avatar">U</div>
            <div class="user-info">
              <div class="user-name" id="user-name">Candidate</div>
              <div class="user-role">Candidate Account</div>
            </div>
            <i class="fas fa-chevron-down" style="font-size: 12px"></i>

            <!-- Profile Dropdown -->
            <div class="profile-dropdown" id="profile-dropdown">
              <a href="#" data-action="view-profile"
                ><i class="fas fa-user"></i> View Profile</a
              >
              <a href="#" data-action="settings"
                ><i class="fas fa-cog"></i> Settings</a
              >
              <div class="divider"></div>
              <a href="#" data-action="logout"
                ><i class="fas fa-sign-out-alt"></i> Logout</a
              >
            </div>
          </div>
        </div>

        <!-- Dashboard Content Sections -->
        <div class="dashboard-content">
          <!-- Profile Section -->
          <div class="section-content active" id="profile-section">
            <div class="section-header">
              <h2>Your Profile</h2>
              <p>Manage your personal information and portfolio</p>
            </div>

            <div class="content-grid">
              <div class="content-card">
                <div class="card-header">
                  <div class="card-icon">
                    <i class="fas fa-user"></i>
                  </div>
                  <h3 class="card-title">Personal Information</h3>
                </div>
                <div class="card-content">
                  <div id="profile-info">
                    <p>
                      <strong>Name:</strong>
                      <span id="profile-name">Loading...</span>
                    </p>
                    <p>
                      <strong>Email:</strong>
                      <span id="profile-email">Loading...</span>
                    </p>
                    <p>
                      <strong>Member Since:</strong>
                      <span id="profile-joined">Loading...</span>
                    </p>
                  </div>
                </div>
                <div class="card-footer">
                  <a href="#" class="card-action" data-action="edit-profile"
                    >Edit Info</a
                  >
                </div>
              </div>

              <!-- In the profile-section, update the skills and experience cards -->
              <div class="content-card">
                <div class="card-header">
                  <div class="card-icon">
                    <i class="fas fa-award"></i>
                  </div>
                  <h3 class="card-title">Skills & Expertise</h3>
                </div>
                <div
                  class="card-content scrollable-container"
                  style="max-height: 200px"
                >
                  <div id="skills-container">
                    <p>
                      No skills added yet. Add your skills to attract better
                      opportunities.
                    </p>
                  </div>
                </div>
                <div class="card-footer">
                  <a href="#" class="card-action" data-action="manage-skills"
                    >Manage Skills</a
                  >
                  <span class="card-stats" id="skills-count">0 skills</span>
                </div>
              </div>

              <div class="content-card">
                <div class="card-header">
                  <div class="card-icon">
                    <i class="fas fa-briefcase"></i>
                  </div>
                  <h3 class="card-title">Work Experience</h3>
                </div>
                <div
                  class="card-content scrollable-container"
                  style="max-height: 200px"
                >
                  <div id="experience-container">
                    <p>No work experience added yet.</p>
                  </div>
                </div>
                <div class="card-footer">
                  <a href="#" class="card-action" data-action="add-experience"
                    >Add Experience</a
                  >
                  <span class="card-stats" id="experience-count"
                    >0 positions</span
                  >
                </div>
              </div>
            </div>
          </div>

          <!-- Learning Section -->
          <div class="section-content" id="learning-section">
            <div class="section-header">
              <h2>Learning Resources</h2>
              <p>Develop your skills with our curated learning paths</p>
            </div>

            <div class="content-grid">
              <!-- Content will be loaded dynamically by candidate-learning.js -->
            </div>
          </div>

          <!-- Jobs Section -->
          <div class="section-content" id="jobs-section">
            <div class="section-header">
              <h2>Job Opportunities</h2>
              <p>Find your next career opportunity</p>
            </div>

            <div class="content-grid">
              <!-- Content will be loaded dynamically by candidate-jobs.js -->
            </div>

            <!-- My Job Applications Section -->
            <div class="applications-section">
              <div class="section-header">
                <h3>My Job Applications</h3>
                <p>
                  Track the status of your job applications and see employer
                  responses
                </p>
              </div>
              <div id="my-job-applications" class="applications-grid">
                <!-- Applications will be loaded here -->
              </div>
            </div>
          </div>

          <!-- Freelance Section -->
          <div class="section-content" id="freelance-section">
            <div class="section-header">
              <h2>Freelance Projects</h2>
              <p>Find freelance work that matches your skills</p>
            </div>

            <div class="content-grid">
              <!-- Content will be loaded dynamically by candidate-freelance.js -->
            </div>

            <!-- My Freelance Proposals Section -->
            <div class="applications-section">
              <div class="section-header">
                <h3>My Freelance Proposals</h3>
                <p>
                  Track the status of your freelance proposals and see client
                  responses
                </p>
              </div>
              <div id="my-freelance-applications" class="applications-grid">
                <!-- Applications will be loaded here -->
              </div>
            </div>
          </div>

          <!-- Wallet Section -->
          <div class="section-content" id="wallet-section">
            <div class="section-header">
              <h2>Your Wallet</h2>
              <p>Manage your earnings and transactions</p>
            </div>

            <div class="content-grid">
              <!-- Content will be loaded dynamically by candidate-wallet.js -->
            </div>
          </div>

          <!-- Settings Section (Hidden by default) -->
          <div class="section-content" id="settings-section">
            <div class="section-header">
              <h2>Account Settings</h2>
              <p>Manage your account preferences and security</p>
            </div>

            <div class="content-grid">
              <div class="content-card">
                <div class="card-header">
                  <div class="card-icon">
                    <i class="fas fa-user-shield"></i>
                  </div>
                  <h3 class="card-title">Privacy & Security</h3>
                </div>
                <div class="card-content">
                  <div class="settings-option">
                    <label class="switch">
                      <input type="checkbox" id="profile-visibility" />
                      <span class="slider round"></span>
                    </label>
                    <span class="settings-label"
                      >Make profile visible to employers</span
                    >
                  </div>
                  <div class="settings-option">
                    <label class="switch">
                      <input type="checkbox" id="email-notifications" checked />
                      <span class="slider round"></span>
                    </label>
                    <span class="settings-label">Email notifications</span>
                  </div>
                </div>
                <div class="card-footer">
                  <a href="#" class="card-action">Save Changes</a>
                  <span class="card-stats">Last updated: Just now</span>
                </div>
              </div>

              <div class="content-card">
                <div class="card-header">
                  <div class="card-icon">
                    <i class="fas fa-bell"></i>
                  </div>
                  <h3 class="card-title">Notification Preferences</h3>
                </div>
                <div class="card-content">
                  <div class="settings-option">
                    <label class="switch">
                      <input type="checkbox" id="job-alerts" checked />
                      <span class="slider round"></span>
                    </label>
                    <span class="settings-label">Job alerts</span>
                  </div>
                  <div class="settings-option">
                    <label class="switch">
                      <input
                        type="checkbox"
                        id="project-notifications"
                        checked
                      />
                      <span class="slider round"></span>
                    </label>
                    <span class="settings-label">Project notifications</span>
                  </div>
                </div>
                <div class="card-footer">
                  <a href="#" class="card-action">Update Preferences</a>
                  <span class="card-stats">Notifications active</span>
                </div>
              </div>
            </div>
          </div>
          <!-- Chats Section -->
          <section id="chats-section" class="section-content">
            <div class="section-header">
              <h2>Messages</h2>
              <p>Communicate with employers about your projects</p>
            </div>

            <!-- Chats List -->
            <div id="chats-list">
              <div class="content-grid">
                <!-- Chats will load here dynamically -->
              </div>
            </div>

            <!-- Chat Window (hidden by default) -->
            <div id="chat-window" style="display: none">
              <div class="content-card">
                <div class="card-header">
                  <h3 id="chat-title">Project Chat</h3>
                  <button class="card-action" onclick="closeChat()">
                    Close Chat
                  </button>
                </div>

                <div class="card-content">
                  <div
                    id="messages-container"
                    style="
                      height: 400px;
                      overflow-y: auto;
                      border: 1px solid #eee;
                      padding: 15px;
                      margin-bottom: 15px;
                      border-radius: 8px;
                    "
                  >
                    <!-- Messages will appear here -->
                  </div>

                  <div style="display: flex; gap: 10px; align-items: center">
                    <input
                      type="text"
                      id="message-input"
                      placeholder="Type your message..."
                      style="
                        flex: 1;
                        padding: 12px;
                        border: 1px solid #ddd;
                        border-radius: 6px;
                      "
                      onkeypress="if(event.key === 'Enter') sendMessage()"
                    />
                    <button
                      onclick="sendMessage()"
                      class="card-action"
                      style="padding: 12px 20px"
                    >
                      Send
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </section>
        </div>
      </main>
    </div>

    <!-- Load all candidate modules -->
    <script src="/users/js/member/main.js"></script>
    <script src="/users/js/member/learning.js"></script>
    <script src="/users/js/member/jobs.js"></script>
    <script src="/users/js/member/freelance.js"></script>
    <script src="/users/js/member/wallet.js"></script>
  </body>
</html>
